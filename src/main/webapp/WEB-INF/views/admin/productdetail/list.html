<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div class="content mt-3" th:fragment="list-productdetail">
    <div class="col-lg-12" style="padding-bottom:120px">
        <button style="padding: 10px 30px ; border-radius: 5px; margin-bottom: 16px;"
                class="btn btn-success"
                data-toggle="modal" data-target="#exampleModal"
                data-whatever="@mdo"
                >ADD</button>
        <table class="table table-striped table-bordered table-hover text-center">
            <thead>
            <tr align="center">
                <th>No</th>
                <th>Product</th>
                <th>Size</th>
                <th>Color</th>
                <th>Price</th>
                <th>Stock</th>
                <th colspan="2">Action</th>
            </tr>
            </thead>
            <tbody id="list-admin">

            </tbody>
        </table>
        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
             aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <p>ADD</p>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <form id="updateForm" method="post" action="/admin/productdetail/add" th:object="${productDetailRequest}" enctype="multipart/form-data">
                        <div class="modal-body">
                            <input type="hidden" id="colorId" name="product" th:value="${productId}">
                            <div class="form-group">
                                <label class="col-form-label">New size : </label>
                                <input th:type="radio" style="margin: 0 8px" th:each="sizes : ${sizeService}" th:value="${sizes.id}" name="size" th:text="${sizes.name}">
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label class="col-form-label">New Colors: </label>
                                <input th:type="radio" name="color" th:each="colors: ${colorService}" th:value="${colors.id}"  th:text="${colors.color}" >

                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label class="col-form-label">New Price: </label>
                                <input th:type="number" th:field="*{price}" >
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label class="col-form-label">New Quantity: </label>
                                <input th:type="number" th:field="*{quantity}" >
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label class="col-form-label">Sub Image: </label>
                                <input th:type="file" id ="file-input" th:multiple="multiple" name="image" >
                            </div>
                            <div id="previewImage"></div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="submit" class="btn btn-success" id="btn-update">Add</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <script>
            document.getElementById("file-input").addEventListener("change",function (event){
                const files = event.target.files;
                const preview = document.getElementById('previewImage');
                preview.innerHTML = '';
                for (const file of files) {
                    if (file.type.startsWith('image/')) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const img = document.createElement('img');
                            img.src = e.target.result;
                            img.style.width = '100px';
                            img.style.height = '100px';
                            img.style.objectFit = 'cover';
                            preview.appendChild(img);
                        }
                        reader.readAsDataURL(file);
                    }
                }
            })
        </script>

    </div>
</div>
</body>
</html>